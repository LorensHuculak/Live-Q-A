<!DOCTYPE html>
<html lang="en">

<head>
    <title>Qanda</title>

    <!-- Required Meta Tags Always Come First -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- favicon -->
    <link rel="shortcut icon" href="/favicon.ico">

    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="/assets/vendor/bootstrap/bootstrap.min.css">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="/assets/vendor/icon-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/vendor/icon-line-pro/style.css">
    <link rel="stylesheet" href="/assets/vendor/icon-hs/style.css">
    <link rel="stylesheet" href="/assets/vendor/hamburgers/hamburgers.min.css">
    <link rel="stylesheet" href="/assets/vendor/slick-carousel/slick/slick.css">
    <link rel="stylesheet" href="/assets/vendor/dzsparallaxer/dzsparallaxer.css">
    <link rel="stylesheet" href="/assets/vendor/dzsparallaxer/dzsscroller/scroller.css">
    <link rel="stylesheet" href="/assets/vendor/dzsparallaxer/advancedscroller/plugin.css">
    <link rel="stylesheet" href="/assets/vendor/fancybox/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/vendor/animate.css">
    <link rel="stylesheet" href="/assets/vendor/malihu-scrollbar/jquery.mCustomScrollbar.min.css">

    <!-- CSS Unify -->
    <link rel="stylesheet" href="/assets/css/unify.css">

    <!-- CSS Customization -->
    <link rel="stylesheet" href="/assets/css/custom.css">
</head>


<body>
    <!-- Header -->
    <header id="js-header" class="u-header  u-header--toggle-section u-header--change-appearance" data-header-fix-moment="300">
        <div class="u-header__section u-header__section--dark g-bg-primary-gradient-opacity-v1 g-transition-0_3 g-py-10" data-header-fix-moment-exclude="g-py-10" data-header-fix-moment-classes="g-py-0">
            <nav class="navbar navbar-toggleable-md">
                <div class="container">
                    <!-- Responsive Toggle Button -->
                    <button class="navbar-toggler navbar-toggler-right btn g-line-height-1 g-brd-none g-pa-0 g-pos-abs g-right-0" type="button" aria-label="Toggle navigation" aria-expanded="false" aria-controls="navBar" data-toggle="collapse" data-target="#navBar">
                        <span class="hamburger hamburger--slider">
                <span class="hamburger-box">
                  <span class="hamburger-inner"></span>
                        </span>
                        </span>
                    </button>
                    <!-- End Responsive Toggle Button -->

                    <!-- Logo -->
                    <a href="/" class="navbar-brand">
                        <img src="/assets/img/logo/qanda.png" alt="Image Description">
                    </a>
                    <!-- End Logo -->

                    <!-- Navigation -->
                    <div class="collapse navbar-collapse align-items-center flex-sm-row g-pt-10 g-pt-5--lg" id="navBar">
                        <ul class="navbar-nav text-uppercase g-font-weight-600 ml-auto">

                            <li class="nav-item g-mx-20--lg">
                                <a id="moderator" class="nav-link g-px-0">{{ username }}</a>
                            </li>

                            <li class="nav-item g-ml-20--lg g-mr-0--lg">
                                <a href="/user/logout" class="nav-link g-px-0">Logout</a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Navigation -->
                </div>
            </nav>
        </div>
    </header>
    <!-- End Header -->

    <main>

        <!-- Discussion Page -->

        <div class="container g-pt-50">
            <div class="u-heading-v2-4--bottom g-brd-primary g-mb-40">
                <h2 class="text-uppercase u-heading-v2__title g-mb-10">New Discussion</h2>

            </div>

            <div id="status" class="g-color-primary g-mb-20"></div>
            <form class="g-mb-30">

                <!-- Text Input -->
                <div class="form-group g-mb-20">
                    <input name="discname" id="discname" class="form-control form-control-md rounded-0" type="text" placeholder="Enter Name...">

                </div>
                <!-- End Input -->

                <p class="g-color-gray-dark-v4">Area: <span class="g-color-primary g-font-weight-600" id="locationspan"></span></p>

                <button id="addBtn" type="submit" class="btn u-btn-outline-teal g-mr-10 g-mt-20 rounded-0">Add Discussion</button>

            </form>
        </div>


    </main>

    <!-- JS Global Compulsory -->
    <script src="/assets/vendor/jquery/jquery.min.js"></script>
    <script src="/assets/vendor/jquery-migrate/jquery-migrate.min.js"></script>
    <script src="/assets/vendor/tether.min.js"></script>
    <script src="/assets/vendor/bootstrap/bootstrap.min.js"></script>

    <!-- JS Implementing Plugins -->
    <script src="/assets/vendor/masonry/dist/masonry.pkgd.min.js"></script>
    <script src="/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="/assets/vendor/slick-carousel/slick/slick.js"></script>
    <script src="/assets/vendor/fancybox/jquery.fancybox.min.js"></script>
    <script src="/assets/vendor/dzsparallaxer/dzsparallaxer.js"></script>
    <script src="/assets/vendor/dzsparallaxer/dzsscroller/scroller.js"></script>
    <script src="/assets/vendor/dzsparallaxer/advancedscroller/plugin.js"></script>
    <script src="/assets/vendor/malihu-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>

    <!-- JS Unify -->
    <script src="/assets/js/hs.core.js"></script>
    <script src="/assets/js/components/hs.header.js"></script>
    <script src="/assets/js/helpers/hs.hamburgers.js"></script>
    <script src="/assets/js/components/hs.dropdown.js"></script>
    <script src="/assets/js/components/hs.scrollbar.js"></script>
    <script src="/assets/js/components/hs.popup.js"></script>
    <script src="/assets/js/components/hs.carousel.js"></script>

    <!-- JS Custom -->
    <script src="/assets/js/custom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

    <script>
        (function () {
            var element = function (id) {
                return document.getElementById(id);
            }

            //get elements
            var mod = element('moderator');
            var discname = element('discname');
            var disclist = element('disclist');
            var status = element('status');
            var addBtn = element('addBtn');
            var location = element('locationspan');


            //Set default status
            statusDefault = status.textContent;
            setStatus = function (s) {

                // Set Status
                if (s == "Please enter a valid name") {
                    status.setAttribute('class', 'g-color-red g-mb-20')
                    status.textContent = s;

                } else {
                    status.setAttribute('class', 'g-color-teal g-mb-20')
                    status.textContent = s;
                }

                if (s !== statusDefault) {
                    var delay = setTimeout(function () {
                        setStatus(statusDefault);

                    }, 4000);
                }
            }

            // Connect to socket.io
            var socket = io.connect('http://127.0.0.1:3005');

            //check for connection
            if (socket !== undefined) {
                console.log('Connected to socket...');

                // Handle Discussion Input
                addBtn.addEventListener('click', function () {

                    //Emit Discussion Input (Server)
                    socket.emit('input', {
                        mod: mod.innerHTML
                        , name: discname.value
                        , location: location.textContent
                    });

                    if (discname.value != "") {

                        setStatus("Discussion started successfully");
                    } else {
                        setStatus("Please enter a valid name");
                    }

                    event.preventDefault();

                });
            }
        })();
    </script>


    <!-- JS Plugins Init. -->
    <script>
        $(document).on('ready', function () {
            // initialization of carousel
            $.HSCore.components.HSCarousel.init('.js-carousel');

            $('#we-provide').slick('setOption', 'responsive', [{
                breakpoint: 992
                , settings: {
                    slidesToShow: 2
                }
        }, {
                breakpoint: 576
                , settings: {
                    slidesToShow: 1
                }
        }], true);



            // initialization of HSScrollBar component
            $.HSCore.components.HSScrollBar.init($('.js-scrollbar'));


            $(window).on('load', function () {
                // initialization of header
                $.HSCore.components.HSHeader.init($('#js-header'));
                $.HSCore.helpers.HSHamburgers.init('.hamburger');
            });

        });
    </script>
</body>

</html>